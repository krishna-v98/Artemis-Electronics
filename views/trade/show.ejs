<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <%- include('../partials/fonts.ejs')%>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/common.css">
  <link rel="stylesheet" href="/css/newtrade.css" />
  <title>Document</title>
</head>

<body id="page">
  <%- include('../partials/header.ejs')%>
  <main>
    <% 
        let status = item.status;
       status = status.charAt(0).toUpperCase() + status.slice(1);   
       let price = item.price;
       if(!price.includes('$')){
         price = '$'+price;
       }

       item.description = item.description.trim();
    %>

    <div class="item">
      <div class="item__picture">
        <img src="<%=item.imageLink%>" alt="" class="item__pic">
      </div>
      <div class="item__name">
        <%= item.name %>
      </div>
      <div class="item__status-price">
        <span id="status"><%= status %></span> &nbsp; &nbsp; <span id="price"><%= price %></span>
      </div>
      <div class="item__posted">
        Posted On: <%= item.createdAt.toLocaleString() %> <br> <br>
      </div>
      <div class="item__posted-user">
        By &nbsp; &nbsp;
        <img src="https://source.unsplash.com/WNoLnJo7tS8" alt=""> &nbsp;
        <%= item.author.firstName+' '+item.author.lastName %>
      </div>
      <div class="item__buttons" id="item__buttons">
        <input type="submit" value="Rate">
        <input type="submit" value="Trade">
        <% if(user == item.author.id){ %>
        <form method="get" action="/trades/<%=item.id%>/edit">
          <input type="submit" value="Edit">
        </form>
        <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#deleteModal">
          Delete
        </button>

        <% } %>
      </div>
      <div class="item__desc">
        <%= item.description %>
      </div>
    </div>
    <div class="comments">
      <div class="comments__title">
        Reviews:
      </div>
      <div class="comments__1">
        <div class="comments__1-dp">
          <img src="https://source.unsplash.com/mEZ3PoFGs_k" alt="">
        </div>
        <div class="comments__1-name">
          Sarah Cooper
        </div>
        <div class="comments__1-date">
          Posted: <%= item.updatedAt.toLocaleString() %>
        </div>
        <div class="comments__1-comment">
          Lorem, ipsum dolor sit amet consectetur adipisicing elit. Autem aut aliquid dignissimos ad voluptatum consequuntur consectetur id necessitatibus sunt dolorum, maiores distinctio ipsam pariatur laborum et dolorem numquam ducimus, reiciendis ullam fugiat placeat facere voluptatem? Nemo, voluptatum sit! Officia, ullam.
        </div>
      </div>
      <div class="comments__1">
        <div class="comments__1-dp">
          <img src="https://source.unsplash.com/rDEOVtE7vOs" alt="">
        </div>
        <div class="comments__1-name">
          Beth Bradshaw
        </div>
        <div class="comments__1-date">
          Posted: <%= item.updatedAt.toLocaleString() %>
        </div>
        <div class="comments__1-comment">
          Lorem, ipsum dolor sit amet consectetur adipisicing elit. Autem aut aliquid dignissimos ad voluptatum consequuntur consectetur id necessitatibus sunt dolorum, maiores distinctio ipsam pariatur laborum et dolorem numquam ducimus, reiciendis ullam fugiat placeat facere voluptatem? Nemo, voluptatum sit! Officia, ullam.
        </div>
      </div>
      <div class="comments__1">
        <div class="comments__1-dp">
          <img src="https://source.unsplash.com/D9HRdD46K0o" alt="">
        </div>
        <div class="comments__1-name">
          Hari Shankar
        </div>
        <div class="comments__1-date">
          Posted: <%= item.updatedAt.toLocaleString() %>
        </div>
        <div class="comments__1-comment">
          Lorem, ipsum dolor sit amet consectetur adipisicing elit. Autem aut aliquid dignissimos ad voluptatum consequuntur consectetur id necessitatibus sunt dolorum, maiores distinctio ipsam pariatur laborum et dolorem numquam ducimus, reiciendis ullam fugiat placeat facere voluptatem? Nemo, voluptatum sit! Officia, ullam.
        </div>
      </div>
    </div>
  </main>

  <form action="/trades/<%=item.id%>?_method=DELETE" method="post">
    <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="deleteModalLabel">Delete</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            Are you Sure you want to delete this item?
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-danger"> Delete </button>
          </div>
        </div>
      </div>
    </div>
  </form>


  <%- include('../partials/footer.ejs')%>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  <script src="/javascript/status.js"></script>
  <script src="/javascript/buttons.js"></script>
</body>

</html>